{"version":3,"sources":["Assets lazy /^/.*/.json$/ groupOptions: {} namespace object","Components/Model/useData.js","Components/Model/Model.js","Components/Model/useBufferAnimation.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","models","getNextModel","i","current","getRandomModel","randomPool","last5","randomIndex","Math","floor","random","length","model","push","splice","shift","Model","loading","nextModel","config","tempConfig","qualityCfg","animating","useRef","meshRef","useState","setModel","slice","fullCycle","prevModel","useEffect","a","filePath","newModel","prev","default","useData","geometryRef","materialRef","useMemo","midPositionBuffer","offsetBuffer","data","colors","prevData","prevColors","prevLength","maxLength","max","prefab","THREE","geometry","InstancedPrefabBufferGeometry","startPositionBuffer","createAttribute","endPositionBuffer","transition","colorArray","startTimeBuffer","startColorBuffer","endColorBuffer","tmpa","vector","prevDataPoint","currentDataPoint","setPrefabData","x","y","z","setLength","sphereRadius","toArray","knotOffset","totalDelay","uniforms","time","value","duration","spiralAngle","PI","angleStart","knotRadius","vertexParameters","vertexPosition","material","StandardAnimationMaterial","roughness","metalness","vertexColors","vertexFunctions","ShaderChunk","vertexColor","dispose","useBufferAnimation","geo","mat","useFrame","frustumCulled","ref"],"mappings":"+GAAA,IAAIA,EAAM,CACT,kBAAmB,CAClB,IACA,GAED,iBAAkB,CACjB,IACA,GAED,iBAAkB,CACjB,IACA,GAED,iBAAkB,CACjB,IACA,GAED,gBAAiB,CAChB,IACA,GAED,mBAAoB,CACnB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,kBAAmB,CAClB,IACA,IAED,oBAAqB,CACpB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,gBAAiB,CAChB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,sBAAu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","file":"static/js/3.7e24efb1.chunk.js","sourcesContent":["var map = {\n\t\"./HQ/chair.json\": [\n\t\t126,\n\t\t5\n\t],\n\t\"./HQ/cone.json\": [\n\t\t127,\n\t\t6\n\t],\n\t\"./HQ/desk.json\": [\n\t\t128,\n\t\t7\n\t],\n\t\"./HQ/dino.json\": [\n\t\t129,\n\t\t8\n\t],\n\t\"./HQ/dog.json\": [\n\t\t130,\n\t\t9\n\t],\n\t\"./HQ/flower.json\": [\n\t\t131,\n\t\t10\n\t],\n\t\"./HQ/grogu.json\": [\n\t\t132,\n\t\t11\n\t],\n\t\"./HQ/guanyin.json\": [\n\t\t133,\n\t\t12\n\t],\n\t\"./HQ/head.json\": [\n\t\t134,\n\t\t13\n\t],\n\t\"./HQ/helmet.json\": [\n\t\t135,\n\t\t14\n\t],\n\t\"./HQ/jet.json\": [\n\t\t136,\n\t\t15\n\t],\n\t\"./HQ/monaLisa.json\": [\n\t\t137,\n\t\t16\n\t],\n\t\"./HQ/mountains.json\": [\n\t\t138,\n\t\t17\n\t],\n\t\"./HQ/notreDame.json\": [\n\t\t139,\n\t\t18\n\t],\n\t\"./HQ/peace.json\": [\n\t\t140,\n\t\t19\n\t],\n\t\"./HQ/pikachu.json\": [\n\t\t141,\n\t\t20\n\t],\n\t\"./HQ/reptile.json\": [\n\t\t142,\n\t\t21\n\t],\n\t\"./HQ/tie.json\": [\n\t\t143,\n\t\t22\n\t],\n\t\"./HQ/violin.json\": [\n\t\t144,\n\t\t23\n\t],\n\t\"./LQ/chair.json\": [\n\t\t145,\n\t\t24\n\t],\n\t\"./LQ/cone.json\": [\n\t\t146,\n\t\t25\n\t],\n\t\"./LQ/desk.json\": [\n\t\t147,\n\t\t26\n\t],\n\t\"./LQ/dino.json\": [\n\t\t148,\n\t\t27\n\t],\n\t\"./LQ/dog.json\": [\n\t\t149,\n\t\t28\n\t],\n\t\"./LQ/flower.json\": [\n\t\t150,\n\t\t29\n\t],\n\t\"./LQ/grogu.json\": [\n\t\t151,\n\t\t30\n\t],\n\t\"./LQ/guanyin.json\": [\n\t\t152,\n\t\t31\n\t],\n\t\"./LQ/head.json\": [\n\t\t153,\n\t\t32\n\t],\n\t\"./LQ/helmet.json\": [\n\t\t154,\n\t\t33\n\t],\n\t\"./LQ/jet.json\": [\n\t\t155,\n\t\t34\n\t],\n\t\"./LQ/monaLisa.json\": [\n\t\t156,\n\t\t35\n\t],\n\t\"./LQ/mountains.json\": [\n\t\t157,\n\t\t36\n\t],\n\t\"./LQ/notreDame.json\": [\n\t\t158,\n\t\t37\n\t],\n\t\"./LQ/peace.json\": [\n\t\t159,\n\t\t38\n\t],\n\t\"./LQ/pikachu.json\": [\n\t\t160,\n\t\t39\n\t],\n\t\"./LQ/reptile.json\": [\n\t\t161,\n\t\t40\n\t],\n\t\"./LQ/tie.json\": [\n\t\t162,\n\t\t41\n\t],\n\t\"./LQ/violin.json\": [\n\t\t163,\n\t\t42\n\t],\n\t\"./MQ/chair.json\": [\n\t\t164,\n\t\t43\n\t],\n\t\"./MQ/cone.json\": [\n\t\t165,\n\t\t44\n\t],\n\t\"./MQ/desk.json\": [\n\t\t166,\n\t\t45\n\t],\n\t\"./MQ/dino.json\": [\n\t\t167,\n\t\t46\n\t],\n\t\"./MQ/dog.json\": [\n\t\t168,\n\t\t47\n\t],\n\t\"./MQ/flower.json\": [\n\t\t169,\n\t\t48\n\t],\n\t\"./MQ/grogu.json\": [\n\t\t170,\n\t\t49\n\t],\n\t\"./MQ/guanyin.json\": [\n\t\t171,\n\t\t50\n\t],\n\t\"./MQ/head.json\": [\n\t\t172,\n\t\t51\n\t],\n\t\"./MQ/helmet.json\": [\n\t\t173,\n\t\t52\n\t],\n\t\"./MQ/jet.json\": [\n\t\t174,\n\t\t53\n\t],\n\t\"./MQ/monaLisa.json\": [\n\t\t175,\n\t\t54\n\t],\n\t\"./MQ/mountains.json\": [\n\t\t176,\n\t\t55\n\t],\n\t\"./MQ/notreDame.json\": [\n\t\t177,\n\t\t56\n\t],\n\t\"./MQ/peace.json\": [\n\t\t178,\n\t\t57\n\t],\n\t\"./MQ/pikachu.json\": [\n\t\t179,\n\t\t58\n\t],\n\t\"./MQ/reptile.json\": [\n\t\t180,\n\t\t59\n\t],\n\t\"./MQ/tie.json\": [\n\t\t181,\n\t\t60\n\t],\n\t\"./MQ/violin.json\": [\n\t\t182,\n\t\t61\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 125;\nmodule.exports = webpackAsyncContext;","// // https://sketchfab.com/3d-models/granite-head-of-amenemhat-iii-64d0b7662b59417986e9d693624de97a\r\n// import head from \"../Assets/head.json\";\r\n// // https://sketchfab.com/3d-models/mona-liza-292f4af9e707473e94474cabd06558ab\r\n// import monaLisa from \"../Assets/monaLisa.json\";\r\n// // https://sketchfab.com/3d-models/dinosaur-fbx-5d618571be5e4a97ba3f31950530a06e\r\n// import dino from \"../Assets/dino.json\";\r\n// // https://sketchfab.com/3d-models/jet-fighter-ba8c9ca82b204222834997996dfc1e1e\r\n// import jet from \"../Assets/jet.json\";\r\n// // https://sketchfab.com/3d-models/ice-cream-71b833e5c6ea487c88eec12743ea14a6\r\n// import cone from \"../Assets/cone.json\";\r\n// // https://sketchfab.com/3d-models/low-poly-doggy-1c8c763518ab4751bfcddf0b6a34011a\r\n// import dog from \"../Assets/dog.json\";\r\n// // https://sketchfab.com/3d-models/lily-uvw-a0bc2a2cedb94cb69c6b61e1705a987f\r\n// import flower from \"../Assets/flower.json\";\r\n// // https://sketchfab.com/3d-models/grogu-baby-yoda-the-child-mandalorian-d33948cb580f40b899d399aa7af5ede5\r\n// import grogu from \"../Assets/grogu.json\";\r\n// // https://sketchfab.com/3d-models/low-poly-gaming-desk-6f1bc394de704e488d44e77134f23993\r\n// import desk from \"../Assets/desk.json\";\r\n// // https://sketchfab.com/3d-models/achilles-helmet-7db0659c137242849bb166d3a7d901bf\r\n// import helmet from \"../Assets/helmet.json\";\r\n// // https://sketchfab.com/3d-models/rpg-reptile-mage-0641cc113cfb4a6ba7269aa696ae1512\r\n// import reptile from \"../Assets/reptile.json\";\r\n// // https://sketchfab.com/3d-models/tie-5bcaa60ed5ce4a51b4233aed418f2280\r\n// import tie from \"../Assets/tie.json\";\r\n// // https://sketchfab.com/3d-models/the-matrix-red-chesterfield-chair-1fd13a270f2f44dbbf88fd3d4bcbb816\r\n// import chair from \"../Assets/chair.json\";\r\n// // https://sketchfab.com/3d-models/pikachu-97bd102cfebf4154853f550d9918baaf\r\n// import pikachu from \"../Assets/pikachu.json\";\r\n// // https://sketchfab.com/3d-models/violin-a784af0713a643b19ffcf65194bc0fbf\r\n// import violin from \"../Assets/violin.json\";\r\n// // https://sketchfab.com/3d-models/guanyin-9db9a5dfb6744a5586dfcb96cb8a7dc5\r\n// import guanyin from \"../Assets/guanyin.json\";\r\n// // https://sketchfab.com/3d-models/grassy-mountains-with-lakes-408364942d794699bbf99aaced81881d\r\n// import mountains from \"../Assets/mountains.json\";\r\n// // https://sketchfab.com/3d-models/notre-dame-cathedral-work-in-progress-d1a0f65c217740ec800021b6771964f1\r\n// import notreDame from \"../Assets/notreDame.json\";\r\n// // https://sketchfab.com/3d-models/embracing-peace-deead583a6fb48c6aa43fea5f2936349\r\n// import peace from \"../Assets/peace.json\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nconst models = [\r\n  \"head\",\r\n  \"monaLisa\",\r\n  \"dino\",\r\n  \"violin\",\r\n  \"flower\",\r\n  \"guanyin\",\r\n  \"mountains\",\r\n  \"notreDame\",\r\n  \"peace\",\r\n  \"pikachu\",\r\n  \"cone\",\r\n  \"dog\",\r\n  \"grogu\",\r\n  \"chair\",\r\n  \"desk\",\r\n  \"helmet\",\r\n  \"reptile\",\r\n  \"tie\",\r\n  \"jet\",\r\n];\r\n\r\nconst getNextModel = (i, models) => {\r\n  i.current++;\r\n  return models[i.current];\r\n};\r\n\r\nconst getRandomModel = (randomPool, last5) => {\r\n  const randomIndex = Math.floor(Math.random() * randomPool.current.length);\r\n  const model = randomPool.current[randomIndex];\r\n  last5.current.push(randomPool.current.splice(randomIndex, 1));\r\n  randomPool.current.push(last5.current.shift());\r\n  return model;\r\n};\r\n\r\nexport default function useData({ nextModel, qualityCfg }) {\r\n  const i = useRef(-1);\r\n  const [model, setModel] = useState(null);\r\n  const randomPool = useRef(models.slice(0, models.length - 5));\r\n  const last5 = useRef(models.slice(models.length - 5));\r\n  const fullCycle = useRef(false);\r\n  const prevModel = useRef();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      let model;\r\n      if (!fullCycle.current) {\r\n        model = getNextModel(i, models);\r\n        if (i.current === models.length - 1) {\r\n          fullCycle.current = true;\r\n        }\r\n      } else {\r\n        model = getRandomModel(randomPool, last5);\r\n      }\r\n\r\n      const newModel = await import(\r\n        `../../Assets/${qualityCfg.current.filePath}/${model}.json`\r\n      );\r\n      setModel((prev) => {\r\n        prevModel.current = prev;\r\n        return newModel.default;\r\n      });\r\n    })();\r\n  }, [nextModel, qualityCfg]);\r\n  return [model, prevModel];\r\n}\r\n","import { useRef } from \"react\";\r\n\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport { useBufferAnimation } from \"./useBufferAnimation\";\r\nimport useData from \"./useData\";\r\n\r\nexport default function Model({\r\n  loading,\r\n  nextModel,\r\n  config,\r\n  tempConfig,\r\n  qualityCfg,\r\n}) {\r\n  const animating = useRef();\r\n  const meshRef = useRef();\r\n\r\n  const [model, prevModel] = useData({ nextModel, qualityCfg });\r\n\r\n  const [geo, mat] = useBufferAnimation({\r\n    model,\r\n    prevModel,\r\n    config,\r\n    animating,\r\n    qualityCfg,\r\n  });\r\n\r\n  useFrame(() => {\r\n    if (!meshRef.current) return;\r\n    if (animating.current) {\r\n      const uniforms = meshRef.current.material.uniforms;\r\n      uniforms.time.value += 1 / 60;\r\n      if (\r\n        uniforms.time.value >\r\n        config.current.duration + config.current.totalDelay\r\n      ) {\r\n        animating.current = false;\r\n        loading.current = false;\r\n        if (tempConfig.current) {\r\n          config.current = tempConfig.current;\r\n          tempConfig.current = null;\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {mat && (\r\n        <mesh\r\n          frustumCulled={false}\r\n          ref={meshRef}\r\n          material={mat}\r\n          geometry={geo}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import * as THREE from \"three\";\r\nimport { useMemo, useRef } from \"react\";\r\n\r\nimport {\r\n  InstancedPrefabBufferGeometry,\r\n  StandardAnimationMaterial,\r\n  ShaderChunk,\r\n} from \"three-bas\";\r\n\r\nexport const useBufferAnimation = ({\r\n  model,\r\n  prevModel,\r\n  config,\r\n  animating,\r\n  qualityCfg,\r\n}) => {\r\n  const geometryRef = useRef(null);\r\n  const materialRef = useRef(null);\r\n\r\n  return useMemo(() => {\r\n    if (!model) return [null, null];\r\n    const [data, colors] = model;\r\n    const [prevData, prevColors] = prevModel.current || [[], []];\r\n\r\n    const length = data.length;\r\n    const prevLength = prevData.length;\r\n    const maxLength = Math.max(length, prevLength);\r\n\r\n    const prefab = new THREE.SphereBufferGeometry(1, 5, 5);\r\n    const geometry = new InstancedPrefabBufferGeometry(prefab, maxLength);\r\n\r\n    const startPositionBuffer = geometry.createAttribute(\"startPosition\", 3);\r\n\r\n    const endPositionBuffer = geometry.createAttribute(\"endPosition\", 3);\r\n\r\n    let midPositionBuffer;\r\n    if (config.current.transition === \"sphere\") {\r\n      midPositionBuffer = geometry.createAttribute(\"midPosition\", 3);\r\n    }\r\n    let offsetBuffer;\r\n    if (config.current.transition === \"knot\") {\r\n      offsetBuffer = geometry.createAttribute(\"offset\", 3);\r\n    }\r\n    const startTimeBuffer = geometry.createAttribute(\"startTime\", 1);\r\n    const startColorBuffer = geometry.createAttribute(\"startColor\", 3);\r\n    const endColorBuffer = geometry.createAttribute(\"endColor\", 3);\r\n\r\n    const tmpa = [];\r\n    const vector = new THREE.Vector3();\r\n    let colorArray;\r\n\r\n    //loop through all new points\r\n    for (let i = 0; i < maxLength; i++) {\r\n      const prevDataPoint = prevData[Math.floor((i * prevLength) / maxLength)];\r\n      const currentDataPoint = data[Math.floor((i * length) / maxLength)];\r\n\r\n      //start position\r\n      if (prevDataPoint) {\r\n        tmpa[0] = prevDataPoint[0];\r\n        tmpa[1] = prevDataPoint[1];\r\n        tmpa[2] = prevDataPoint[2];\r\n      } else {\r\n        //case where new points are added\r\n        tmpa[0] = 1 - Math.random() * 2;\r\n        tmpa[1] = 1 - Math.random() * 2;\r\n        tmpa[2] = 1 - Math.random() * 2;\r\n      }\r\n      geometry.setPrefabData(startPositionBuffer, i, tmpa);\r\n\r\n      if (config.current.transition === \"sphere\") {\r\n        //mid position\r\n        vector.x = 1 - Math.random() * 2;\r\n        vector.y = 1 - Math.random() * 2;\r\n        vector.z = 1 - Math.random() * 2;\r\n\r\n        vector.setLength(qualityCfg.current.sphereRadius);\r\n        vector.toArray(tmpa);\r\n        geometry.setPrefabData(midPositionBuffer, i, tmpa);\r\n      }\r\n      if (config.current.transition === \"knot\") {\r\n        //mid position\r\n        vector.x = 1 - Math.random() * 2;\r\n        vector.y = 1 - Math.random() * 2;\r\n        vector.z = 1 - Math.random() * 2;\r\n        vector.setLength(qualityCfg.current.knotOffset);\r\n        vector.toArray(tmpa);\r\n        geometry.setPrefabData(offsetBuffer, i, tmpa);\r\n      }\r\n\r\n      //end position\r\n      tmpa[0] = currentDataPoint[0];\r\n      tmpa[1] = currentDataPoint[1];\r\n      tmpa[2] = currentDataPoint[2];\r\n      geometry.setPrefabData(endPositionBuffer, i, tmpa);\r\n\r\n      //delay\r\n      tmpa[0] = (config.current.totalDelay / maxLength) * i;\r\n      geometry.setPrefabData(startTimeBuffer, i, tmpa);\r\n\r\n      //start color\r\n      colorArray = prevDataPoint\r\n        ? prevColors[prevDataPoint[3]]\r\n        : colors[currentDataPoint[3]];\r\n      geometry.setPrefabData(startColorBuffer, i, colorArray);\r\n\r\n      //end color\r\n      colorArray = colors[currentDataPoint[3]];\r\n      geometry.setPrefabData(endColorBuffer, i, colorArray);\r\n    }\r\n\r\n    const uniforms = {\r\n      time: { value: 0 },\r\n      duration: { value: config.current.duration },\r\n      spiralAngle: { value: Math.PI * 4 },\r\n      angleStart: { value: 0.57 },\r\n      knotRadius: { value: qualityCfg.current.knotRadius },\r\n    };\r\n    const vertexParameters = [\r\n      \"uniform float time;\",\r\n      \"uniform float duration;\",\r\n      \"uniform float spiralAngle;\",\r\n      \"uniform float angleStart;\",\r\n      \"uniform float knotRadius;\",\r\n\r\n      \"attribute vec3 startPosition;\",\r\n      \"attribute vec3 midPosition;\",\r\n      \"attribute vec3 endPosition;\",\r\n      \"attribute vec3 offset;\",\r\n\r\n      \"attribute float startTime;\",\r\n      \"attribute vec3 startColor;\",\r\n      \"attribute vec3 endColor;\",\r\n    ];\r\n    if (config.current.transition === \"knot\") {\r\n      vertexParameters.push(\r\n        \"vec3 knot(float p) {\",\r\n        \"vec3 pos;\",\r\n        \"float angle = angleStart + spiralAngle * p;\",\r\n\r\n        \"pos.x = knotRadius * (cos(angle) - 2.0 * cos(2.0 * angle));\",\r\n        \"pos.y = knotRadius * (sin(angle) + 2.0 * sin(2.0 * angle));\",\r\n        \"pos.z = knotRadius * (sin(3.0 * angle));\",\r\n        \"return pos;\",\r\n        \"}\"\r\n      );\r\n    }\r\n\r\n    const vertexPosition = [\r\n      \"float progress = clamp(time - startTime, 0.0, duration) / duration;\",\r\n    ];\r\n\r\n    if (config.current.transition === \"sphere\") {\r\n      vertexPosition.push(\r\n        \"if(progress < 0.5) {\",\r\n        \"float halfProgress = easeCubicInOut(2.0*progress);\",\r\n        \"transformed += mix(startPosition, midPosition, halfProgress);\",\r\n        \"} else {\",\r\n        \"float halfProgress = easeCubicInOut(2.0*progress-1.0);\",\r\n        \"transformed += mix(midPosition, endPosition, halfProgress );\",\r\n        \"}\"\r\n      );\r\n    } else if (config.current.transition === null) {\r\n      vertexPosition.push(\r\n        \"progress = easeCubicInOut(progress);\",\r\n        \"transformed += mix(startPosition, endPosition, progress);\"\r\n      );\r\n    } else if (config.current.transition === \"knot\") {\r\n      vertexPosition.push(\r\n        \"if(progress < 0.2) {\",\r\n        \"progress = (5.0 * progress);\",\r\n        \"vec3 pos = knot(0.0);\",\r\n        \"transformed += mix(startPosition, offset + pos, progress);\",\r\n        \"} else if (progress < 0.8) {\",\r\n        \"progress = (1.667 * progress - 0.3335);\",\r\n        \"vec3 pos = knot(progress);\",\r\n        \"transformed += (pos + offset);\",\r\n        \"} else {\",\r\n        \"progress = (5.0 * progress - 4.0);\",\r\n        \"vec3 pos = knot(0.0);\",\r\n        \"transformed += mix(offset + pos, endPosition, progress);\",\r\n        \"}\"\r\n      );\r\n    }\r\n    const material = new StandardAnimationMaterial({\r\n      roughness: 0.5,\r\n      metalness: 0.5,\r\n      vertexColors: THREE.VertexColors,\r\n      // flatShading: true,\r\n      // opacity: 1,\r\n      // transparent: true,\r\n      uniforms,\r\n      vertexParameters,\r\n      vertexFunctions: [ShaderChunk[\"ease_cubic_in_out\"]],\r\n      vertexPosition,\r\n      vertexColor: [\"vColor = mix(startColor, endColor, progress);\"],\r\n    });\r\n\r\n    geometryRef.current && geometryRef.current.dispose();\r\n    materialRef.current && materialRef.current.dispose();\r\n    geometryRef.current = geometry;\r\n    materialRef.current = material;\r\n    animating.current = true;\r\n    return [geometry, material];\r\n  }, [model, prevModel, config, animating, qualityCfg]);\r\n};\r\n"],"sourceRoot":""}